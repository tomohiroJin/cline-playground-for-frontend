# 🎯 TODO リスト

- [x] すべてのピースを正しい位置に戻すと、パズルが完成する
  - HomePage.tsx
  - [x] パズルが完成すると'パズルが完成しました！'と表示されること
    - usePuzzle.ts#usePuzzle
    - [x] パズルが完成していない場合はcompletedがfalseになること
    - [x] パズルが完成するとcompletedがtrueになること
      - puzzle-utils.ts#isPuzzleCompleted
      - [x] 全てのピースが正しい位置にある場合はtrueを返すこと
      - [x] 一部のピースが正しくない位置にある場合はfalseを返すこと
      - [x] 空きピースが正しくない位置にあっても、他のピースが全て正しい位置にある場合はtrueを返すこと
      - [x] 空きピースが正しい位置にあっても、他のピースが正しくない位置にある場合はfalseを返すこと
    - usePuzzle
      - [x] usePuzzle 初期状態の振る舞い
        - [x] 画像URLはnullから始まる
        - [x] オリジナル画像サイズはnullから始まる
        - [x] divisionはデフォルト値の4から始まる
        - [x] パズルpiecesは空配列から始まる
        - [x] 空白位置はnullから始まる
        - [x] 経過時間は0から始まる
        - [x] completedはfalseから始まる
      - [x] initializePuzzleを呼び出すとパズルが初期化されること
      - [x] 画像URLが設定されていない場合はinitializePuzzleが何もしないこと
      - [x] movePiece
        - [x] ピースを移動することで全体のピースに更新が発生すること
        - [x] 移動したピースの現在位置が更新されること
        - [X] ピースを移動した後に空白ピースの位置情報が正しく更新されること
      - [x] completed
        - [x] パズルが完成するとcompletedがtrueになること
      - [x] resetPuzzleを呼び出すとパズルがリセットされること
- [x] ユーザーが好きな画像をアップロードできる
  - HomePage.tsx
  - [x] 画面を表示するとアップロードするための画像をアップロードするボタンが表示されている
  - [x] ボタンをクリックすると画像を選択して好きな画像をアップロードすることができる
  - ImageUploader.tsx#ImageUploader.tsx
    - [x] 画像が未選択の場合、アップロードのテキストが表示される
    - [x] 正しい画像をアップロードすると onImageUpload が呼ばれ、プレビューが表示される
    - [x] ファイルサイズが大きすぎる場合、エラーメッセージが表示され、onImageUpload は呼ばれない
    - src/utils/puzzle-utils.ts#checkImageFileSize
      - [x] ファイルサイズが制限内の場合はtrueを返すこと
      - [x] ファイルサイズが制限を超える場合はfalseを返すこと
  - [x] パズルを開始ボタンをクリックするとゲームが開始されること
    - [x] 画面を表示すると'パズルを開始'ボタンが表示されること
    - [x] 画像が選択されていない場合は'パズルを開始'ボタンが利用できないこと
    - [x] 画像が選択されている場合は'パズルを開始'ボタンが利用できること
    - [x] パズルを開始ボタンをクリックするとゲームが初期化されてパズルボードが表示されること
      - src/components/organisms/PuzzleBoard.tsx
      - [x] パズルボードコンポーネント
        - [x] HintToggleButton
          - [x] ヒントモードがfalseの時は「ヒントを表示」ボタンが表示されていること
          - [x] ヒントモードがtrueの時は「ヒントを隠す」が表示されていること
          - [x] ヒントボタンがクリックされた時にonToggleHintが呼ばれること
        - [x] 経過時間が表示される
          - [x] formatElapsedTime
            - [x] 経過時間が 0 の場合は 00:00 が表示されること
            - [x] 経過時間が 59 の場合は 00:59 が表示されること
            - [x] 経過時間が 60 の場合は 01:00 が表示されること
            - [x] 経過時間が 65 の場合は 01:05 が表示されること
            - [x] 経過時間が 3599 の場合は 59:59 が表示されること
            - [x] 経過時間が 3600 の場合は 60:00 が表示されること
        - [x] 完成時にオーバーレイが表示される
        - [x] パズルを表示するボード
          - [x] ボードのサイズに合わせて分割された枠が表示される
          - [x] パズルピースの表示
            - [x] ピースの数だけパズルピースのコンポーネントが作成されること
            - [x] パズルピースのコンポーネントへの受け渡し
            （静的型付けなのでここまでのテストは要らない気がする）
              - [x] コンポーネントに必要な共通のデフォルトプロパティが渡されていること
              - [x] コンポーネント 0 に正しい piece プロパティが渡されていること
              - [x] コンポーネント 1 に正しい piece プロパティが渡されていること
              - [x] コンポーネント 2 に正しい piece プロパティが渡されていること
              - [x] コンポーネント 3 に正しい piece プロパティが渡されていること
            - src/components/molecules/PuzzlePiece.tsx
            - [x] パズルピース
              - [x] 指定された表示位置に描画されること
              - [x] クリック時に onClick が呼ばれること
              - [x] ピースの位置が変更されたときに状態が更新されること
              - [x] スタイルを修正して画面に表示分割されるパネルサイズを調整
              （スタイル周りのテストについてはどう考えるべきだろうか、いったんテストが難しいのでテストはスキップして目検とした）
        - [x] ピースのスライド移動
          - [x] 空白ピースに隣接するピースをクリックすると、onPieceMoveが呼び出される
          - [x] 空白ピースに隣接しないピースをクリックしても、onPieceMoveは呼び出されない
          - [x] 空白ピースをクリックしても何も起こらない
          - isPuzzleCompleted
            - [x] 全てのピースが正しい位置にある場合はtrueを返すこと
            - [x] 一部のピースが正しくない位置にある場合はfalseを返すこと
            - [x] 空きピースが正しくない位置にあっても、他のピースが全て正しい位置にある場合はtrueを返すこと(これってありえないはずだが、考え方的にはありということで)
            - [x] 空きピースが正しい位置にあっても、他のピースが正しくない位置にある場合はfalseを返すこと
        - [x] 境界値テスト - 右下の位置のピース
          - [x] 右下が空白で、その隣のピースをクリックするとonPieceMoveが呼び出される
          - [x] ピースが右下に移動した後も正しく表示され、クリック可能であること
          - [x] 右下の上が空白の場合に右下のピースをクリックすると右下のピースが一つ上に移動する
          - [x] 空白ピースが右下から他の位置に移動した後も正しく機能すること
          - [X] パズルが完成した状態ではピースをクリックしてもonPieceMoveは呼び出されない
- ヒント切り替えボタンを押下するとパネル後ろに元の画像が表示される
  - HomePage.tsx
  - ヒント切替ボタンをクリックするとtoggleHintModeが呼ばれること
    - [x] ヒント切替ボタンをクリックするとtoggleHintModeが呼ばれること
    - src/hooks/useHintMode.ts（内部で利用しているもので表されると意味が伝わらない）
      - [x] 初期状態ではヒントは非表示である
      - [x] ヒント表示状態の切り替え
        - [x] ユーザーが『ヒント表示』操作を行うと、ヒントが表示される
        - [x] ユーザーが『ヒント表示切替』操作を行うと、ヒントの表示状態が反転する
        - [x] ユーザーが『ヒント表示』操作を行うと、ヒントが表示になる
        - [x] ユーザーが『ヒント非表示』操作を行うと、ヒントが非表示になる

- [x] ヒントの切り替えはうまくいっているがヒント画像が出なくなっちゃった