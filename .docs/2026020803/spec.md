# RISK LCD 仕様書

## 1. ゲーム概要

### 1.1 基本情報

| 項目 | 内容 |
|------|------|
| ゲーム名 | RISK LCD |
| サブタイトル | LIQUID CRYSTAL DANGER |
| ジャンル | レーン回避・リスク管理・ローグライトビルド |
| 操作 | 3ボタン（LEFT / ACTION / RIGHT） |
| 対応入力 | キーボード（矢印キー / Enter）、タッチ |

### 1.2 コンセプト

レトロな LCD（液晶）ゲーム機風のビジュアルで、3レーンを左右に移動しながら上から降ってくる障害物を回避するゲーム。ステージ間でパーク（強化）を選択し、リスクとリターンのバランスを構築していくローグライト要素を持つ。

## 2. ゲームフロー

```
タイトル画面
  ├── GAME START → プレイスタイル選択(任意) → ゲーム開始
  ├── PLAY STYLE → スタイル装備画面
  ├── UNLOCK → ショップ画面（PT消費でアンロック）
  └── HELP → ヘルプ画面

ゲームループ:
  ステージ開始アナウンス
    → サイクル（1ビート単位で障害配置 → プレイヤー回避判定）× 規定回数
    → ステージクリア → パーク選択（3択/4択）
    → 次ステージ or 全クリア

  被弾時:
    シールドあり → シールド消費、続行
    復活パークあり → 復活して続行
    なし → GAME OVER

リザルト画面 → ランク表示 → PT獲得 → タイトルへ
```

## 3. 機能仕様

### 3.1 レーンシステム

- 3レーン構成（L / C / R）
- 各レーンに倍率（×1〜×8）が設定される
- 倍率はプレイスタイルにより決定
- 避難所レーン: 障害が来ない代わりにスコア×0
- 制限レーン: プレイヤーが入れないレーン

### 3.2 障害・予告システム

- 各サイクルで1〜複数レーンに障害が配置される
- 障害が来る前に上段から警告が表示される（予告段数）
- 予告段数はステージ毎にランダム配置（0〜7段）
- 予告段数が多いほど判断時間が長い

### 3.3 スコアリング

| 要素 | 内容 |
|------|------|
| 基本スコア | レーン倍率 × 基本得点 |
| コンボ倍率 | 3連続: ×1.5 / 5連続: ×2.0 |
| ニアミスボーナス | 障害の隣レーンで回避成功 |
| ステージクリアボーナス | クリア時に追加PT |
| パーク効果 | スコア倍率の積み重ね |

### 3.4 ステージ構成

| ステージ | サイクル数 | 速度(ms) | 同時障害 | フェイク |
|----------|-----------|----------|----------|---------|
| ST1 | 8 | 2600 | 1 | なし |
| ST2 | 10 | 2200 | 1 | なし |
| ST3 | 12 | 1850 | 2 | なし |
| ST4 | 14 | 1550 | 2 | あり |
| ST5 | 16 | 1250 | 2 | あり |
| ST6(裏) | 20 | 1050 | 2 | あり |

### 3.5 ステージ修飾（モディファイア）

ST2以降、60%の確率でランダムに付与される。

| ID | 名前 | 効果 |
|----|------|------|
| double | DOUBLE THREAT | 同時障害+50% |
| rush | RUSH HOUR | 速度+20% |
| bonus | BONUS ROUND | 全得点×2 |
| fog | FOG OF WAR | 予告-1段 |
| calm | CALM BEFORE STORM | 前半緩やか/終盤加速 |

### 3.6 プレイスタイル

| ID | 名前 | 倍率 | 特殊効果 |
|----|------|------|----------|
| standard | STANDARD | ×1/×2/×4 | バランス型 |
| highrisk | ハイリスク信者 | ×1/×4/×8 | 1レーン避難所化、死亡PT+50% |
| cautious | 慎重派 | ×1/×1/×3 | 安全レーン×3、クリアBONUS+100% |
| quickjudge | 瞬間判断型 | ×1/×2/×4 | 移動CD-40%、予告+2、加速+25% |
| reversal | 一発逆転型 | ×1/×3/×5 | 各ST1回自動シールド |

### 3.7 パーク一覧

#### BUFF系（安全強化）

| アイコン | 名前 | 効果 | 重複 |
|----------|------|------|------|
| ◉ | 鷹の目 | 全レーン予告+1段 | 可 |
| $ | 欲深き者 | 全スコア×1.3 | 可 |
| ⚡ | 連鎖増幅 | コンボ倍率+0.5 | 可 |
| ◆ | 緊急防壁 | シールド+1 | 可 |
| ◷ | 時の砂 | 速度-15% | - |
| ♥ | 不屈の魂 | 死亡時1回復活 | - |
| ▶ | 高倍強化 | 最大倍率レーン×2 | - |
| ◀ | 安全投資 | 最低倍率レーン×2 | - |

#### RISK系（リスクリターン）

| アイコン | 名前 | 効果 |
|----------|------|------|
| ! | ギャンブラー | スコア×1.8、予告-1段 |
| » | 加速報酬 | 速度+20%、スコア×1.5 |
| ✕ | 盲目の道 | ランダム1レーン予告-3、×1.4 |
| ▌ | 狭路 | 1レーン避難所化、×1.6 |

### 3.8 アンロックショップ

PT（ポイント）を消費してアンロックするアイテム。

| ID | 名前 | コスト | 効果 |
|----|------|--------|------|
| ui_danger | 危険強調 | 50 | 障害レーンのセグメント強調表示 |
| ui_timing | タイミングバー+ | 80 | ビートバー高視認性 |
| ui_art | アート強化 | 120 | コンボ/シールド時キャラクター変化 |
| start_shield | 初期シールド | 250 | 開始時シールド+1 |
| slot2 | スタイル複合 | 350 | プレイスタイル2つ装備可能 |
| perk4 | 選択肢拡張 | 400 | パーク選択3→4択 |
| score_base | 基本報酬UP | 500 | 全レーン基本得点+5 |
| slot3 | スタイル三重 | 700 | プレイスタイル3つ装備可能 |
| stage6 | 裏ステージ | 800 | STAGE 6解禁 |
| oracle | 神託の目 | 1500 | 全予告+2段 |
| gold | 黄金のオーラ | 3000 | 獲得PT永久×2 |

### 3.9 ランク評価

| ランク | 条件 |
|--------|------|
| S+ | 全クリア & スコア≧5000 |
| S | 全クリア & スコア≧4000 |
| A | 全クリア & スコア≧2500 |
| B | 全クリア or (ST3到達 & スコア≧800) |
| C | ST2到達 & スコア≧400 |
| D | スコア≧150 |
| E | それ以外 |

### 3.10 セーブデータ

- localStorage にPT・購入済みアイテム・装備スタイル・ベストスコアを保存
- セーブキー: `rlcd12`（レガシー: `rlcd10`, `rlcd11`）

## 4. ビジュアル仕様

### 4.1 デザインコンセプト

- レトロ LCD ゲーム機風の外観
- ゲーム機筐体をCSSで表現（ベゼル、ボタン、ブランドロゴ）
- LCD画面は黄緑背景（`#94a770`）にダークカラーで表示
- フォント: Silkscreen（本文）、Orbitron（タイトル/数字）

### 4.2 キャラクターアート

ASCII アートによるキャラクター表現（状態別）:
- idle: 待機
- walk: 移動中
- danger: 危険時
- combo: コンボ中
- shield: シールド発動時
- dead: 死亡
- ghost: ゴースト
- safe: 安全時

### 4.3 エモーションパネル

画面下部に大型ASCII アートを表示。ゲーム状態に応じて変化:
- idle / walk / danger / combo / safe / shield

### 4.4 CSS変数

| 変数 | 値 | 用途 |
|------|-----|------|
| --bg | #94a770 | LCD背景色 |
| --on | rgba(24,28,18,.92) | アクティブテキスト |
| --gh | rgba(24,28,18,.065) | ゴースト（薄い表示） |
| --wn | rgba(24,28,18,.36) | 警告テキスト |
| --dm | rgba(24,28,18,.16) | 薄暗いテキスト |

## 5. 操作仕様

### 5.1 ボタン操作

| ボタン | メニュー | ゲーム中 |
|--------|---------|---------|
| LEFT (◀) | 戻る | 左レーンへ移動 |
| ACTION (●) | 決定 | - |
| RIGHT (▶) | - | 右レーンへ移動 |
| UP (▲) | 前の項目 | - |
| DOWN (▼) | 次の項目 | - |

### 5.2 キーボードマッピング

| キー | アクション |
|------|-----------|
| ArrowLeft / a | LEFT |
| ArrowRight / d | RIGHT |
| ArrowUp / w | UP |
| ArrowDown / s | DOWN |
| Enter / Space | ACTION |

### 5.3 マウス/タッチ操作

| 操作 | 動作 |
|------|------|
| メニュー/リスト項目をクリック/タップ | その項目を選択・実行 |
| パークカードをクリック/タップ | そのパークを選択・装備 |
| 画面の空白部分をクリック/タップ | 何も起こらない |
| タッチスワイプ（上下） | UP / DOWN（項目移動） |
| タッチスワイプ（左右） | LEFT / RIGHT（レーン移動・戻る） |

## 6. 統合仕様

### 6.1 ルーティング

| 項目 | 値 |
|------|-----|
| パス | `/risk-lcd` |
| チャンク名 | `RiskLcdPage` |
| 遅延読み込み | `React.lazy` |

### 6.2 メニューカード

| 項目 | 値 |
|------|-----|
| タイトル | RISK LCD |
| 説明 | LCD風レーン回避×ローグライトビルド。3レーンで障害を避け、パークを重ねてビルドを構築。リスクを取るか安全を選ぶか、すべてはあなたの判断次第。 |
| 画像 | `risk_lcd_card_bg.webp` |
