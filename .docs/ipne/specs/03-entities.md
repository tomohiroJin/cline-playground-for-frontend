# IPNE エンティティ一覧

ゲーム内に登場する敵、罠、壁、アイテムの仕様とカラーコード。

---

## 敵（Enemy）

敵は**丸い形**で表示される。色によって種類が異なる。

### 敵パラメータ一覧

| 種類 | 色 | HP | 攻撃力 | 速度 | スポーン数 | 特徴 |
|------|-----|-----|--------|------|-----------|------|
| **パトロール** | 紫 `#6b21a8` | 4 | 1 | 2 | 10 | 巡回行動。プレイヤーを発見すると追跡 |
| **チャージ** | 暗赤 `#991b1b` | 3 | 2 | 5 | 6 | 高速で突進してくる。接触ダメージ大 |
| **レンジド** | オレンジ `#c2410c` | 3 | 1 | 1.5 | 5 | 遠距離攻撃。距離を取って攻撃してくる |
| **スペシメン** | 紺青 `#1e3a5f` | 1 | 0 | 4 | 4 | 高速で逃げる。ダメージは与えない |
| **ボス** | 茶褐色 `#7c2d12` | 35 | 4 | 1.5 | 1 | 高耐久・高火力。ゴール部屋に配置 |
| **ミニボス** | 暗赤紫 `#6b2136` | 15 | 3 | 2 | 0〜3 | 中ボス。ステージ3以降に出現 |
| **メガボス** | 深紫 `#3b0764` | 80 | 6 | 1.8 | 1 | 最終ボス。ステージ5のゴール部屋に配置 |

### 敵の詳細パラメータ

| 種類 | 感知範囲 | 追跡範囲 | 攻撃範囲 |
|------|---------|---------| ---------|
| パトロール | 5 | 8 | 3 |
| チャージ | 6 | 10 | 1 |
| レンジド | 7 | 10 | 4 |
| スペシメン | 4 | なし | 0 |
| ボス | 8 | 15 | 3 |
| ミニボス | 7 | 12 | 2 |
| メガボス | 12 | 20 | 4 |

### 敵AI共通ルール

| ルール | 詳細 |
|--------|------|
| 視認判定 | マンハッタン距離で円形 |
| 追跡開始 | 視認範囲内にプレイヤーがいる |
| 追跡中断 | 追跡距離を超える or 3秒間見失う |
| 壁貫通 | 不可（経路探索を使用） |
| 移動更新間隔 | 200ms |
| 帰還行動 | 追跡中断後、初期位置に戻る |

### 敵の色の意図

| 種類 | 色の意図 |
|------|----------|
| パトロール（紫） | 中立的・警戒すべき存在 |
| チャージ（赤） | 危険・攻撃的 |
| レンジド（オレンジ） | 距離を取る存在 |
| スペシメン（青） | 消極的・逃げる存在 |
| ボス（茶褐色） | 強敵・各ステージの最終障壁 |
| ミニボス（暗赤紫） | 中間脅威・上位ステージに出現 |
| メガボス（深紫） | 最終ボス・最深部の守護者 |

### スペシメンのドロップ

| 項目 | 値 |
|------|-----|
| ドロップ確率 | 30% |
| ドロップアイテム | 小回復（+3 HP） |

---

## 罠（Trap）

罠は**記号・線**で表示される。盗賊は薄く見えるが、戦士は踏むまで見えない。

### 罠パラメータ一覧

| 種類 | 色 | 見た目 | 効果 | クールダウン | スポーン比率 |
|------|-----|--------|------|-------------|-------------|
| **ダメージ罠** | 赤 `#dc2626` | X印（×マーク） | 3ダメージ | 5秒 | 40% |
| **移動妨害罠** | 青 `#3b82f6` | 波線（〜マーク） | 6秒間移動速度50%低下 | 5秒 | 30% |
| **テレポート罠** | 黄 `#f59e0b` | @マーク | 迷路内のランダムな場所にワープ | 8秒 | 30% |

- **スポーン数**: 合計10個
- **再使用**: 全罠タイプが再使用可能（クールダウン後に再発動）

### 罠の状態

| 状態 | 説明 |
|------|------|
| HIDDEN | 隠れ状態：戦士には見えない。盗賊には薄く見える |
| REVEALED | 発見済み：踏むか攻撃して判明 |
| TRIGGERED | 発動済み（クールダウン中）：見た目が変化し、誰でも見える |

### 罠の可視性

| 職業 | 未発見罠の表示 |
|------|---------------|
| 戦士 | 非表示（踏むまで見えない） |
| 盗賊 | 半透明表示（アルファ0.3） |

### 罠の設計思想

罠は **「利用・判断対象」** として設計：

- テレポート罠：「窮地からの脱出」または「運任せのショートカット」
- 移動妨害床：「敵を誘い込んで有利に戦う」戦術
- ダメージ床：「HPリソースとの兼ね合い」判断

---

## 特殊壁（Wall）

特殊壁は**四角い形**で表示される。盗賊は薄く見えるが、戦士は触れるまで見えない。

### 壁パラメータ一覧

| 種類 | 色 | 見た目 | HP | 通過 | スポーン比率 |
|------|-----|--------|-----|------|-------------|
| **破壊可能壁** | 茶 `#78350f` | ひび割れた四角 | 3 | 破壊後可 | 50% |
| **すり抜け壁** | 緑 `#166534` | 点線の四角 | - | 常時可 | 30% |
| **透明壁** | 紫 `#4c1d95` | 薄い輪郭の四角 | - | 不可 | 20% |

- **スポーン数**: 合計6個

### 壁の状態

| 状態 | 説明 |
|------|------|
| INTACT | 初期状態 |
| REVEALED | 発見済み（触れた/攻撃した） |
| DAMAGED | ダメージを受けた（破壊可能壁のみ） |
| BROKEN | 破壊済み（通過可能になる） |

### 壁の可視性

| 職業 | 破壊可能壁 | すり抜け可能壁 | 透明壁 |
|------|-----------|---------------|--------|
| 戦士 | 攻撃後に判明 | 通過後に判明 | 接触後に判明 |
| 盗賊 | 常時表示（異色） | 常時表示（半透明） | 常時表示（半透明） |

---

## アイテム（Item）

アイテムは**小さな四角**で表示される。踏むと自動取得。

### アイテムパラメータ一覧

| 種類 | 色 | 見た目 | 効果 | スポーン数 |
|------|-----|--------|------|-----------|
| **小回復** | 緑 `#22c55e` | 緑の小四角 | HP +3（+回復ボーナス） | 8 |
| **大回復** | 赤 `#ef4444` | 赤の小四角 | HP +7（+回復ボーナス） | 4 |
| **全回復** | 黄 `#fbbf24` | 黄の小四角 | HP全回復 | 1 |
| **レベルアップ** | ピンク `#f0abfc` | ピンクの小四角 | 即座にレベルアップ選択 | 2 |
| **マップ公開** | 茶 `#a16207` | 茶の小四角 | マップ全体を公開 | 1 |

### アイテム配置総数

| カテゴリ | 合計数 |
|---------|--------|
| アイテム | 16個 |

---

## プレイヤー（Player）

| 表示 | 色 | 説明 |
|------|-----|------|
| 青い円 + 三角 | 青紫 `#667eea` | 三角は向いている方向を示す |

---

## マップタイル

| 種類 | 色 | 説明 |
|------|-----|------|
| 床 | 暗灰 `#1f2937` | 移動可能 |
| 壁 | 灰 `#374151` | 通行不可 |
| スタート | 青 `#3b82f6` | 開始地点 |
| ゴール | 緑 `#10b981` | 到達するとクリア |

---

## UI要素の色

### HPバー

| 状態 | 色 | 条件 |
|------|-----|------|
| 高HP | `#22c55e` | HP > 66% |
| 中HP | `#facc15` | HP > 33% |
| 低HP | `#ef4444` | HP ≤ 33% |

### 評価表示色

| 評価 | 色 | 説明 |
|------|-----|------|
| S | 金色 `#fbbf24` | 最高評価 |
| A | 銀色 `#94a3b8` | 優秀 |
| B | 銅色 `#b45309` | 堅実 |
| C | 青色 `#3b82f6` | 辛勝 |
| D | 灰色 `#6b7280` | 瀕死 |

### エフェクト

| 要素 | 色 | 説明 |
|------|-----|------|
| ダメージオーバーレイ | `rgba(239, 68, 68, 0.35)` | 被ダメージ時に画面全体を赤くフラッシュ |
| 攻撃エフェクト | `rgba(255, 255, 255, 0.8)` | 攻撃範囲を白枠で表示 |

---

## スポーン数まとめ（ステージ別）

| カテゴリ | ステージ1 | ステージ2 | ステージ3 | ステージ4 | ステージ5 |
|---------|----------|----------|----------|----------|----------|
| 通常敵 | 25 | 31 | 38 | 45 | 52 |
| ミニボス | 0 | 0 | 2 | 2 | 3 |
| ボス/メガボス | 1 | 1 | 1 | 1 | 1 |
| 罠 | 10 | 12 | 15 | 18 | 22 |
| 特殊壁 | 6 | 8 | 10 | 16 | 12 |
| アイテム | 16 | 16 | 16 | 16 | 16 |

### 敵スケーリング倍率（ステージ別）

| パラメータ | ステージ1 | ステージ2 | ステージ3 | ステージ4 | ステージ5 |
|-----------|----------|----------|----------|----------|----------|
| HP | ×1.0 | ×1.3 | ×1.6 | ×2.0 | ×2.5 |
| ダメージ | ×1.0 | ×1.2 | ×1.4 | ×1.7 | ×2.0 |
| 速度 | ×1.0 | ×1.1 | ×1.15 | ×1.2 | ×1.25 |

---

## カラーパレット一覧

### マップ要素

| 要素 | 色コード |
|------|----------|
| 床 | `#1f2937` |
| 壁 | `#374151` |
| スタート | `#3b82f6` |
| ゴール | `#10b981` |

### プレイヤー

| 要素 | 色コード |
|------|----------|
| プレイヤー | `#667eea` |

### 敵キャラクター

| 種類 | 色コード |
|------|----------|
| パトロール | `#6b21a8` |
| チャージ | `#991b1b` |
| レンジド | `#c2410c` |
| スペシメン | `#1e3a5f` |
| ボス | `#7c2d12` |
| ミニボス | `#6b2136` |
| メガボス | `#3b0764` |

### 罠

| 種類 | 色コード |
|------|----------|
| ダメージ罠 | `#dc2626` |
| 移動妨害罠 | `#3b82f6` |
| テレポート罠 | `#f59e0b` |

### 特殊壁

| 種類 | 色コード |
|------|----------|
| 破壊可能壁 | `#78350f` |
| すり抜け壁 | `#166534` |
| 透明壁 | `#4c1d95` |

### アイテム

| 種類 | 色コード |
|------|----------|
| 小回復 | `#22c55e` |
| 大回復 | `#ef4444` |
| 全回復 | `#fbbf24` |
| レベルアップ | `#f0abfc` |
| マップ公開 | `#a16207` |
