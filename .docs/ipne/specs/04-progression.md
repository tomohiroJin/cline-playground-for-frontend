# IPNE 成長・レベルアップシステム

## 概要

敵を撃破することで経験値（撃破数）を獲得し、レベルアップ時に能力値を選択して強化するシステム。

---

## レベルシステム

### 基本情報

| 項目 | 値 |
|------|-----|
| 最大レベル | 15（全5ステージ通して） |
| 初期レベル | 1 |
| レベルアップ条件 | 必要撃破数の累計 |

---

## 撃破数テーブル

| レベルアップ | 必要撃破数 | 累計撃破数 |
|-------------|-----------|-----------| 
| 1 → 2 | 1 | 1 |
| 2 → 3 | 2 | 3 |
| 3 → 4 | 2 | 5 |
| 4 → 5 | 2 | 7 |
| 5 → 6 | 3 | 10 |
| 6 → 7 | 3 | 13 |
| 7 → 8 | 4 | 17 |
| 8 → 9 | 4 | 21 |
| 9 → 10 | 4 | 25 |
| 10 → 11 | 5 | 30 |
| 11 → 12 | 6 | 36 |
| 12 → 13 | 7 | 43 |
| 13 → 14 | 8 | 51 |
| 14 → 15 | 9 | 60 |

**備考**: 各ステージのレベル上限が段階的に設定されている（ステージ1: Lv11、ステージ2: Lv12、…、ステージ5: Lv15）。レベルと能力値はステージ間で引き継がれる。

---

## 能力値（Stats）

### 能力値一覧

| 能力 | 説明 | 初期値（戦士） | 初期値（盗賊） |
|------|------|---------------|---------------|
| attackPower | 1撃のダメージ量 | 2 | 1 |
| attackRange | 攻撃の届く距離（タイル） | 1 | 1 |
| moveSpeed | 移動速度（タイル/秒） | 4 | 6 |
| attackSpeed | クールダウン倍率（1.0=通常、0.5=2倍速） | 0.7 | 1.0 |
| healBonus | 回復アイテムの追加回復量 | 1 | 0 |

---

## レベルアップ時の選択肢

レベルアップ時に以下の5択から1つを選択：

| 選択 | 効果 | 上限 |
|------|------|------|
| 攻撃力強化 | attackPower +1 | なし |
| 攻撃距離強化 | attackRange +1 | 3 |
| 移動速度強化 | moveSpeed +1 | 8 |
| 攻撃速度強化 | attackSpeed -0.1（クールダウン短縮） | 0.5（2倍速） |
| 回復量強化 | healBonus +1 | +5 |

---

## 能力値上限

| 能力 | 上限 | 備考 |
|------|------|------|
| attackPower | なし | レベル15で最大+14 |
| attackRange | 3 | 初期1 + 最大+2 |
| moveSpeed | 8 | 戦士：最大+4、盗賊：最大+2 |
| attackSpeed | 0.5 | クールダウン倍率の最小値（2倍速） |
| healBonus | +5 | 初期0〜1 + 最大+5 |

---

## レベルアップUI

### 表示タイミング

- 撃破数が次レベルに必要な累計に到達した瞬間
- ゲームは一時停止状態

### 表示内容

| 項目 | 内容 |
|------|------|
| タイトル | 「レベルアップ！」 |
| 選択肢 | 5つの能力強化オプション |
| 各選択肢の表示 | 能力名、現在値、上昇量、効果説明 |
| 上限到達時 | グレーアウト表示（選択不可） |

---

## 撃破数表示

### UI仕様

| 項目 | 値 |
|------|-----|
| 位置 | レベル表示の横 |
| 形式 | 撃破数バー（現在撃破数/次レベルまでの必要撃破数） |
| 色 | 紫系 |

---

## 能力値表示

### UI仕様

| 項目 | 値 |
|------|-----|
| 位置 | HP表示の下 |
| 形式 | アイコン + 数値 |
| 表示項目 | Lv、ATK、RNG、SPD、ASPD、HEAL |

### 表示略称

| 略称 | 能力 |
|------|------|
| Lv | レベル |
| ATK | attackPower（攻撃力） |
| RNG | attackRange（攻撃距離） |
| SPD | moveSpeed（移動速度） |
| ASPD | attackSpeed（攻撃速度） |
| HEAL | healBonus（回復ボーナス） |

---

## 成長設計思想

### レベルアップの意味づけ

迷宮内での戦闘・経験は、調査員の"適応"として扱われる：

- 攻撃力アップ：迷宮反応体への対処が洗練
- 攻撃距離アップ：間合いの取り方が上達
- 移動速度アップ：迷宮内の移動最適化が進む
- 攻撃速度アップ：反応速度の向上
- 回復量アップ：回復効率の最適化

### 上限の意味

Lv15でMAX＝全5層を踏破するまでに調査員が到達しうる適応の限界。

### 選択の価値

- 常に同じ能力を上げてしまわないようバランス調整
- ビルドの多様性を確保
- 職業ごとに有効な成長パターンが異なる

---

## ステージ報酬

各ステージクリア後（ステージ1〜4）、次のステージに進む前にボーナス報酬を1つ選択できる。

### ステージ報酬の選択肢

| 報酬 | 効果 | 説明 |
|------|------|------|
| 最大HP強化 | maxHp +5 & 現在HP +5 | 探索の経験が生命力を高めた |
| 攻撃力強化 | attackPower +1 | 戦闘の記憶が攻撃を鋭くした |
| 攻撃距離強化 | attackRange +1 | 間合いの感覚が研ぎ澄まされた |
| 移動速度強化 | moveSpeed +1 | 足運びが迷宮に適応した |
| 攻撃速度強化 | attackSpeed -0.1 | 反応速度が一段上がった |
| 回復量強化 | healBonus +1 | 回復の効率が改善された |

**備考**: ステージ報酬はレベルアップ選択とは独立しており、能力値上限を超えて強化できる。

---

## ステージ別レベル上限

各ステージにはレベル上限が設定されている。レベルと能力値はステージ間で引き継がれる。

| ステージ | レベル上限 |
|---------|----------|
| 1 | 11 |
| 2 | 12 |
| 3 | 13 |
| 4 | 14 |
| 5 | 15 |

---

## 即レベルアップアイテム

### 仕様

| 項目 | 値 |
|------|-----|
| 効果 | 即座に1レベルアップ（選択UI表示） |
| 配置数 | 2個 |
| 配置場所 | 隠し通路、行き止まり |
| 撃破数への影響 | 撃破数は変化しない（レベルのみ上昇） |
