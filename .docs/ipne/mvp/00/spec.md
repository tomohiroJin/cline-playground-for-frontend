# 仕様・要件定義（IPNE MVP0）

## 1. 目的

`.docs/ipne/specs/迷宮調査脱出アクション：mvp_0_実装タスク分解.md` をベースに、
**MVP0（歩けて脱出できる）** を現行プロダクトへ追加する。

- 早く「遊べるもの」を作る
- E2E（開始→プレイ→終了）を最短で成立させる
- 次フェーズへ進むための基盤を作る

---

## 2. ゲーム概要（MVP0）

### 2.1 コンセプト

固定迷路で「歩く→壁に当たる→ゴールに触れる」だけを体験できる、
**最小限の脱出プロトタイプ**。

### 2.2 プレイ時間

- 1プレイ：2〜3分

---

## 3. 画面構成

1. **タイトル画面**
2. **プロローグ画面**（開始直後1回）
3. **ゲーム画面**
4. **クリア画面**

※ 設定画面・リトライUI・サウンドはMVP0では扱わない

---

## 4. ゲームルール（MVP0）

- プレイヤーは迷路内を自由に移動できる
- 壁に当たると停止（通過不可）
- ゴールに接触するとクリア
- 敵・罠・HP・レベルアップは無し

---

## 5. 操作仕様

### 5.1 PC

- 移動：WASD または 矢印キー

### 5.2 モバイル（最低限）

- 画面4分割タップで移動方向を決める簡易操作
  - 画面を「上 / 下 / 左 / 右」の4領域に分割し、
    タップされた領域の方向に一定速度で移動する
  - タップ中は移動継続、指を離すと停止
  - 入力優先度はタップ > キーボード（タップ中はキー入力を無視）

---

## 6. マップ仕様（固定）

- 固定サイズの迷路（タイルグリッド）
- 一本道寄りの構成で、1プレイ2〜3分
- プレイヤー開始位置とゴールは固定

---

## 7. テキスト仕様

### 7.1 プロローグ

- 1〜2文の短文
- 例：
  - 「調査のはずだった。」
  - 「入口は、もう閉じている。」

### 7.2 クリア

- 1文のみ
- 例：
  - 「脱出できた。」

---

## 8. UI/描画

- 描画は **Canvas** を基本とする（既存ゲーム群と整合）
- プレイヤー：単色の矩形/円
- 壁：濃色の矩形
- ゴール：明るい色の矩形/円
- HUD最小：タイトル・操作説明・クリアメッセージ
- タイトル画面背景画像：作品の雰囲気に合わせた抽象的・調査感のあるトーン
- プロローグ画面背景画像：ライトノベル的な雰囲気のイメージ
- 画像表示はヘッダー/フッター分を考慮したフルスクリーン比率で表示する

---

## 9. 技術/アーキテクチャ要件

- React + TypeScript + styled-components の既存構成に合わせる
- `src/pages/` にページ追加し、`src/App.tsx` でルーティング
- GameList にカード追加
- 画像アセットは `src/assets/images/` に追加し、GameList/画面背景で使用
- コーディング規約：`any` 不使用 / `null` 不使用 / `as const` と Union 型で定数管理
- 純粋ロジックは `src/features/ipne-mvp0/` に分離（TDD対象）

---

## 10. テスト要件（TDD）

### 10.1 UI統合テスト

- `IpneMvp0Page` が描画される
- タイトル表示、プロローグ表示、ゲーム領域 `role="region"` を検証
- GameList のカード数が **8** になること

### 10.2 ロジック単体テスト

- 移動計算（速度・境界）
- 衝突判定（壁判定）
- ゴール判定（接触でクリア）
- 固定マップ生成（規定サイズ）

---

## 11. 受け入れ基準

- [ ] `/ipne-mvp0` でゲームが開始できる
- [ ] タイトル → プロローグ → ゲーム → クリア のE2Eが成立
- [ ] キーボードでスムーズに移動できる
- [ ] 壁は通過できない
- [ ] ゴール接触でクリア画面に遷移する
- [ ] タイトル画面／プロローグ画面の背景画像が表示される
- [ ] テストが追加され `npm test` が通る
