# 絵合わせパズル

TypeScriptとReactで作成された、ブラウザで遊べる絵合わせパズルゲームです。

## 機能

- 好きな画像をアップロードしてパズルにできます
- あらかじめ用意されたデフォルト画像からも選択できます
- 2x2から32x32まで、様々な難易度を選択できます
- ドラッグ＆ドロップでピースを移動できます
- 正しい位置にピースを配置すると固定されます
- 経過時間の表示機能があります
- ヒントモードで元の画像を薄く表示できます
- パズル完成時のオーバーレイを目のアイコンで表示/非表示切り替えできます
- パズル完成後、オーバーレイを非表示にして画像をクリックすると報酬動画が再生されます
- 隠しコマンド（空白パネルを10回クリック）でパズル強制完成機能が使えます
- スマホ・タブレットにも対応しています

## 技術スタック

- **言語**: TypeScript
- **フレームワーク**: React
- **スタイリング**: Tailwind CSS
- **状態管理**: Jotai
- **ルーティング**: React Router
- **テスト**: Jest

## インストール方法

```bash
# リポジトリをクローン
git clone https://github.com/tomohiroJin/cline-playground-for-frontend.git
cd cline-playground-for-frontend

# 依存パッケージをインストール
npm install

# 開発サーバーを起動
npm start
```

## 使い方

1. トップページで画像をアップロードするか、デフォルト画像から選択します
   - 画像をアップロードする場合は、10MB以下のファイルを選択します
   - デフォルト画像を使用する場合は、「デフォルト画像から選択」タブをクリックして好みの画像を選びます
2. 難易度（分割数）を選択します
3. 「パズルを開始」ボタンをクリックします
4. ピースをドラッグ＆ドロップして正しい位置に配置します
5. すべてのピースを正しく配置するとパズルが完成します
6. パズル完成時に表示されるオーバーレイは、右上の目のアイコンをクリックすることで表示/非表示を切り替えられます
7. オーバーレイを非表示にした後、完成した画像をクリックすると報酬動画が再生されます
   - 動画は自動再生され、左上の「✕」ボタンをクリックするか、動画が終了すると閉じられます
8. 隠しコマンド：空白パネルを10回クリックすると、パズルを強制的に完成させるボタンが表示されます

## プロジェクト構成

``` text
src/
  ├── components/                # コンポーネント
  │   ├── atoms/                 # 最小単位のコンポーネント
  │   ├── molecules/             # 複合コンポーネント
  │   │   ├── DefaultImageSelector.tsx  # デフォルト画像選択
  │   │   ├── DifficultySelector.tsx    # 難易度選択
  │   │   ├── ImageUploader.tsx         # 画像アップロード
  │   │   └── PuzzlePiece.tsx           # パズルピース
  │   ├── organisms/             # 複雑なコンポーネント
  │   │   └── PuzzleBoard.tsx    # パズルボード
  │   ├── templates/             # レイアウトテンプレート
  │   └── HomePageSections.tsx   # ホームページセクション
  ├── hooks/                     # カスタムフック
  │   ├── useCompletionOverlay.ts  # 完成オーバーレイ管理
  │   ├── useGameState.ts          # ゲーム状態管理
  │   ├── useHintMode.ts           # ヒントモード管理
  │   ├── usePuzzle.ts             # パズル操作管理
  │   └── useVideoPlayback.ts      # 動画再生管理
  ├── pages/                     # ページコンポーネント
  │   └── HomePage.tsx           # ホームページ
  ├── store/                     # 状態管理
  │   └── atoms.ts               # Jotaiアトム定義
  ├── types/                     # 型定義
  ├── utils/                     # ユーティリティ関数
  │   └── puzzle-utils.ts        # パズル関連ユーティリティ
  ├── App.tsx                    # アプリケーションルート
  └── index.tsx                  # エントリーポイント
```

## テスト

```bash
# テストを実行
npm test

# テストカバレッジを確認
npm run test:coverage
```

## 開発者向け情報

### アーキテクチャ

このプロジェクトはアトミックデザインパターンに基づいて構築されています。コンポーネントは以下のように分類されています：

- **Atoms**: 最小単位のコンポーネント（ボタン、入力フィールドなど）
- **Molecules**: 複数のAtomsを組み合わせたコンポーネント（フォーム、カードなど）
- **Organisms**: 複雑な機能を持つコンポーネント（ヘッダー、フッター、パズルボードなど）
- **Templates**: ページのレイアウトを定義するコンポーネント
- **Pages**: 実際のページコンポーネント

状態管理にはJotaiを使用しており、アトムベースのアプローチで状態を管理しています。

### 主要なカスタムフック

- `usePuzzle`: パズルの状態と操作を管理するフック
- `useHintMode`: ヒントモードの状態を管理するフック
- `useCompletionOverlay`: パズル完成時のオーバーレイ表示/非表示を管理するフック
- `useVideoPlayback`: 報酬動画の再生を管理するフック

## ライセンス

MIT

## 作者

あなたの名前

## 謝辞

このプロジェクトは以下のオープンソースライブラリを使用しています：

- React
- TypeScript
- Tailwind CSS
- Jotai
- React Router
- Jest
