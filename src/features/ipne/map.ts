/**
 * マップ生成モジュール
 * 固定の迷路マップを定義
 */

import { GameMap, TileTypeValue } from './types';

/**
 * 固定の迷路マップを生成
 * 2〜3分で完了できるサイズの迷路
 *
 * 凡例:
 * 0 = 床（通行可能）
 * 1 = 壁（通行不可）
 * 2 = ゴール
 * 3 = スタート
 */
export const createMap = (): GameMap => {
  // 15x11のマップ（外周は壁）
  const map: TileTypeValue[][] = [
    [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
    [1, 3, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1],
    [1, 1, 1, 0, 1, 0, 1, 0, 1, 0, 1, 1, 1, 0, 1],
    [1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1],
    [1, 0, 1, 1, 1, 1, 1, 1, 1, 0, 1, 0, 1, 1, 1],
    [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
    [1, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1],
    [1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1],
    [1, 0, 1, 1, 1, 0, 1, 1, 1, 1, 1, 0, 1, 0, 1],
    [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 1],
    [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
  ];

  return map;
};

/**
 * マップの幅を取得
 */
export const getMapWidth = (map: GameMap): number => {
  return map[0]?.length ?? 0;
};

/**
 * マップの高さを取得
 */
export const getMapHeight = (map: GameMap): number => {
  return map.length;
};
