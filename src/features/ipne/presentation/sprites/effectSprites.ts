/**
 * エフェクトスプライト定義
 *
 * 攻撃や魔法などの視覚エフェクト用スプライトを
 * 16×16 ピクセルアートのコードスプライト方式で定義する。
 */

import { SpriteDefinition } from './spriteData';
import { SpriteSheetDefinition } from './spriteSheet';

// ---------------------------------------------------------------------------
// 攻撃斬撃エフェクト（3フレームアニメーション）
// ---------------------------------------------------------------------------
// パレット:
//   0 = 透明
//   1 = #ffffff（白 - 斬撃の最も明るい中心部）
//   2 = #e0e7ff（最淡青 - 斬撃の内側グロー）
//   3 = #a5b4fc（淡青紫 - 斬撃の外側グロー）
//   4 = #6366f1（青紫 - 斬撃の残光・エッジ）
// ---------------------------------------------------------------------------

/** 攻撃斬撃エフェクトのパレット */
const ATTACK_SLASH_PALETTE = ['', '#ffffff', '#e0e7ff', '#a5b4fc', '#6366f1'];

/**
 * 攻撃斬撃エフェクト フレーム1（斬撃開始）のピクセルデータ（16×16）
 * 左上から右下へ向かう薄い弧の始まり。
 * まだ斬撃が始まったばかりで、細く鋭い白い光の筋。
 */
const ATTACK_SLASH_FRAME1_PIXELS: number[][] = [
  // y=0
  [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
  // y=1:  左上端に微かな光の始点
  [0, 0, 4, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
  // y=2
  [0, 0, 3, 1, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
  // y=3
  [0, 0, 0, 3, 1, 4, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
  // y=4
  [0, 0, 0, 0, 4, 2, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0],
  // y=5
  [0, 0, 0, 0, 0, 3, 1, 4, 0, 0, 0, 0, 0, 0, 0, 0],
  // y=6
  [0, 0, 0, 0, 0, 0, 4, 2, 3, 0, 0, 0, 0, 0, 0, 0],
  // y=7
  [0, 0, 0, 0, 0, 0, 0, 3, 1, 4, 0, 0, 0, 0, 0, 0],
  // y=8
  [0, 0, 0, 0, 0, 0, 0, 0, 4, 3, 0, 0, 0, 0, 0, 0],
  // y=9
  [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
  // y=10
  [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
  // y=11
  [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
  // y=12
  [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
  // y=13
  [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
  // y=14
  [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
  // y=15
  [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
];

/**
 * 攻撃斬撃エフェクト フレーム2（斬撃全開）のピクセルデータ（16×16）
 * 弧が最大に広がった状態。白い中心線の両側に青白いグローが広がる。
 * 左上から右下への力強い斬撃弧。
 */
const ATTACK_SLASH_FRAME2_PIXELS: number[][] = [
  // y=0:  弧の左上端（上方への跳ね）
  [0, 0, 4, 3, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
  // y=1
  [0, 4, 3, 1, 2, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
  // y=2:  弧の上部
  [0, 3, 2, 1, 1, 2, 4, 0, 0, 0, 0, 0, 0, 0, 0, 0],
  // y=3
  [0, 0, 4, 3, 1, 1, 2, 4, 0, 0, 0, 0, 0, 0, 0, 0],
  // y=4:  弧の中間上部
  [0, 0, 0, 4, 2, 1, 1, 2, 4, 0, 0, 0, 0, 0, 0, 0],
  // y=5
  [0, 0, 0, 0, 4, 3, 1, 1, 3, 4, 0, 0, 0, 0, 0, 0],
  // y=6:  弧の中央部（最も太い）
  [0, 0, 0, 0, 0, 4, 2, 1, 1, 2, 4, 0, 0, 0, 0, 0],
  // y=7
  [0, 0, 0, 0, 0, 0, 4, 2, 1, 1, 2, 4, 0, 0, 0, 0],
  // y=8:  弧の中間下部
  [0, 0, 0, 0, 0, 0, 0, 4, 3, 1, 1, 3, 4, 0, 0, 0],
  // y=9
  [0, 0, 0, 0, 0, 0, 0, 0, 4, 2, 1, 1, 2, 4, 0, 0],
  // y=10: 弧の下部
  [0, 0, 0, 0, 0, 0, 0, 0, 0, 4, 2, 1, 1, 3, 4, 0],
  // y=11
  [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 4, 3, 1, 2, 3, 0],
  // y=12: 弧の右下端
  [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 4, 2, 1, 3, 4],
  // y=13
  [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 4, 3, 2, 4],
  // y=14: 弧の終端（下方への跳ね）
  [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 4, 3, 0],
  // y=15
  [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
];

/**
 * 攻撃斬撃エフェクト フレーム3（斬撃消散）のピクセルデータ（16×16）
 * 弧が崩れて散っていく状態。断片化した光の粒子が残る。
 * 色は淡く、透明部分が増え、フェードアウト効果を表現。
 */
const ATTACK_SLASH_FRAME3_PIXELS: number[][] = [
  // y=0
  [0, 0, 0, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
  // y=1:  散り始めた上部の残光
  [0, 0, 4, 0, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
  // y=2
  [0, 3, 0, 0, 2, 4, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
  // y=3
  [0, 0, 0, 4, 0, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
  // y=4:  散っていく中間上部
  [0, 0, 0, 0, 0, 0, 3, 4, 0, 0, 0, 0, 0, 0, 0, 0],
  // y=5
  [0, 0, 0, 0, 0, 4, 2, 0, 4, 0, 0, 0, 0, 0, 0, 0],
  // y=6
  [0, 0, 0, 0, 0, 0, 0, 3, 2, 0, 0, 0, 0, 0, 0, 0],
  // y=7:  中央部の消えかけた弧
  [0, 0, 0, 0, 0, 0, 0, 4, 0, 3, 4, 0, 0, 0, 0, 0],
  // y=8
  [0, 0, 0, 0, 0, 0, 0, 0, 0, 4, 2, 0, 4, 0, 0, 0],
  // y=9
  [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 3, 0, 0, 0, 0],
  // y=10: 下部の残光粒子
  [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 4, 0, 3, 4, 0, 0],
  // y=11
  [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 4, 0, 3, 0],
  // y=12
  [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 4, 0, 3, 0, 0],
  // y=13: 散り終わりの微かな光点
  [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 4, 0, 4],
  // y=14
  [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 4, 0],
  // y=15
  [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
];

/**
 * 攻撃斬撃エフェクトスプライトシート（3フレームアニメーション）
 *
 * 左上から右下へ弧を描く剣の斬撃エフェクト。
 * フレーム1: 斬撃開始 - 細い白光の筋が走り始める
 * フレーム2: 斬撃全開 - 弧が最大に広がり、白い芯と青紫のグローで輝く
 * フレーム3: 斬撃消散 - 光の粒子に分解されフェードアウト
 *
 * フレーム間隔は 100ms（合計 300ms で高速再生）。
 * 剣撃のスピード感を表現する短いアニメーション。
 */
export const ATTACK_SLASH_SPRITE_SHEET: SpriteSheetDefinition = {
  sprites: [
    {
      width: 16,
      height: 16,
      pixels: ATTACK_SLASH_FRAME1_PIXELS,
      palette: ATTACK_SLASH_PALETTE,
    },
    {
      width: 16,
      height: 16,
      pixels: ATTACK_SLASH_FRAME2_PIXELS,
      palette: ATTACK_SLASH_PALETTE,
    },
    {
      width: 16,
      height: 16,
      pixels: ATTACK_SLASH_FRAME3_PIXELS,
      palette: ATTACK_SLASH_PALETTE,
    },
  ],
  frameDuration: 100,
};
